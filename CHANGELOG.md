# üìù –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π WIRALIS

## üéâ –í–µ—Ä—Å–∏—è –æ—Ç 05.11.2025

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–§–∞–≤–∏–∫–æ–Ω –æ–±–Ω–æ–≤–ª–µ–Ω**
   - –ó–∞–º–µ–Ω–µ–Ω —Å—Ç–∞—Ä—ã–π —Ñ–∞–≤–∏–∫–æ–Ω –Ω–∞ –Ω–æ–≤—ã–π —Å –∑–µ–ª–µ–Ω–æ–π –±—É–∫–≤–æ–π "W"
   - –§–∞–π–ª: `client/public/favicon.png`
   - –§–∞–≤–∏–∫–æ–Ω —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ wiralis.ru –∏ wiralis.online

2. **API `/api/bot/generate-code` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**
   - ‚úÖ Endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: `{ "code": "ABC123", "expiresAt": "...", "message": "..." }`
   - ‚úÖ –°—Ç–∞—Ç—É—Å 200 OK
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

3. **API `/api/verify-code` –∏—Å–ø—Ä–∞–≤–ª–µ–Ω**
   - ‚úÖ Endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç –∫–æ–¥—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
   - ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - ‚úÖ –ü–æ–º–µ—á–∞–µ—Ç –∫–æ–¥ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–π

4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞**
   - ‚úÖ PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∞
   - ‚úÖ –¢–∞–±–ª–∏—Ü—ã `registration_codes` –∏ `wiralis_users` —Å–æ–∑–¥–∞–Ω—ã
   - ‚úÖ –°—Ö–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —á–µ—Ä–µ–∑ `npm run db:push`

5. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã**
   - ‚úÖ `DATABASE_URL` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL
   - ‚úÖ `TELEGRAM_BOT_API_SECRET` - API –∫–ª—é—á –¥–ª—è –±–æ—Ç–∞

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ API endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:

```bash
# –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞
curl -X POST http://localhost:5000/api/bot/generate-code \
  -H "Content-Type: application/json" \
  -H "X-API-Key: US42982557" \
  -d '{"telegramId": 123, "nickname": "Test"}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ 200 OK
# {"code":"WZS2X7","expiresAt":"2025-11-05T20:03:46.861Z","message":"–ö–æ–¥ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω"}

# –¢–µ—Å—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞
curl -X POST http://localhost:5000/api/verify-code \
  -H "Content-Type: application/json" \
  -d '{"code": "WZS2X7"}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ 200 OK
# {"success":true,"user":{...}}
```

### üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞

1. **PRODUCTION_DEPLOYMENT.md** - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω
   - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Nginx –¥–ª—è wiralis.ru –∏ wiralis.online
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SSL/HTTPS
   - PM2 –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

2. **QUICK_UPDATE.md** - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
   - Git pull
   - Rsync
   - –†—É—á–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –û—Ç–∫–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â—É—é –≤–µ—Ä—Å–∏—é

3. **CHANGELOG.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **Framework**: React + TypeScript + Vite
- **Backend**: Express.js + Node.js 20
- **Database**: PostgreSQL (Drizzle ORM)
- **Build**: `npm run build` –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥
- **Production**: `npm run start` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ
- **Development**: `npm run dev` –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### üìä –°—Ç–∞—Ç—É—Å

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|-----------|--------|
| –§–∞–≤–∏–∫–æ–Ω | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| API –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| API –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–¥–∞ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∞ |
| –°–∞–π—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç |

### üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω

1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ `/var/www/wiralis.ru/` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `npm install`
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å `.env` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. –°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç: `npm run build`
5. –ó–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ PM2: `pm2 start npm --name wiralis -- run start`
6. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Nginx (—Å–º. PRODUCTION_DEPLOYMENT.md)
7. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSL —Å Let's Encrypt

–°–º. —Ñ–∞–π–ª **PRODUCTION_DEPLOYMENT.md** –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏.

---

## üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ñ–∞–π–ª—ã –≥–æ—Ç–æ–≤—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è
